# board-anon-bot

Анонимный Telegram-бот для нескольких досок (каналов) в одном экземпляре бота.

## Что внутри

- `aiogram 3` (async handlers + callbacks)
- `SQLModel` (схема создается автоматически при старте)
- `uv` для окружения и запуска
- Роли: `superadmin` и `board_admin`
- Выбор доски пользователем через inline-кнопки
- Публикация текста с политикой "один активный пост на пользователя в доске"

## Быстрый старт

1. Установить зависимости:

```bash
uv sync
```

2. Создать `.env`:

```bash
cp .env.example .env
```

3. Заполнить в `.env` минимум:

- `BOT_TOKEN`
- `SUPERADMIN_IDS` (через запятую)

4. Запустить:

```bash
uv run python -m app.main
```

## Админ-команды

- `/admin` — открыть админ-панель
- `/board_create` — создать доску (FSM)
- `/board_archive` — архивировать доску (выбор через кнопки)
- `/board_activate` — активировать доску (выбор через кнопки)
- `/admin_add` — выдать права админа
- `/admin_remove` — снять права админа
- `/block_user` — заблокировать пользователя в доске
- `/unblock_user` — разблокировать пользователя в доске
- `/rate_limit_set` — изменить rate limit доски
- `/stats` — статистика
- `/cancel` — отменить текущий FSM-флоу

Все выборы досок в админских сценариях делаются inline-кнопками.

## Пользовательские команды

- `/start` — приветствие + выбор доски
- `/boards` — выбрать/сменить доску
- `/help` — помощь

## Проверки качества

- Линтер: `uv run ruff check .`
- Type checker (`ty`): `uv run ty check`
- Тесты: `uv run pytest`

## Структура

- `app/main.py` — запуск бота
- `app/handlers/` — команды, сообщения, callbacks
- `app/db/` — SQLModel модели, репозиторий, сессии
- `app/keyboards/` — inline клавиатуры
- `app/locales/` — сообщения (RU, расширяемо)
